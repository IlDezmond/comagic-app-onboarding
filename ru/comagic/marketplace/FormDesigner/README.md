## Интеграция с FormDesigner <br />

**Ценность**   <br />

Решение позволяет настроить передачу заявок с форм FormDesigner в CoMagic, для дальнейшего построения Сквозной аналитики. <br />

 **Какие данные передаются**  <br />   
  
В заявку передаем: <br />

- контактные данные (имя,телефон,email);
- дату и время создания;
- данные сессии (рекламную кампанию, источник, UTM-метки и тд);
- в случае отсутствия сессии, дефолтную РК или источник.  <br />


**Необходимые компоненты для работы интеграции**  <br />
- Загрузка оффлайн-заявок из внешней системы в нашем сервисе.
<br />


### Подключение интеграции <br />

Интеграция подключается в несколько шагов:<br />

1. Нажмите "Активен" на этой странице. <br />
2. Выполните настройку интеграции. <br />

- **Добавьте поле "visitor_session_id" в форму** <br />

<details>
  <summary style="font-weight:bold;"> Подробнее </summary> <br />
  
  - Зайдите в FormDesigner в настройки конкретной формы.
  - Перейдите в раздел "Элементы".
  - Добавьте скрытое поле.
  - В названии укажите **visitor_session_id**.
  - В "Расширенные параметры" в параметре "Название макроса" также укажите **visitor_session_id**.

</details> 
<br />
  
- **Настройте Webhook в FormDesigner** <br />

<details>
  <summary style="font-weight:bold;"> Подробнее </summary> <br />
  
  - Зайдите в FormDesigner в настройки конкретной формы.
  - Перейдите в раздел "Модули".
  - Найдите модуль Weebhooks  и добавьте его.
  - В поле "URL адрес" добавьте Webhook URL из настроек интеграции.
  - В поле "Метод передачи данных" выберете метод POST.
  - В "Параметры запроса из формы" необходимо указать следующие значения (во 2 столбце названия могут отличать, если вы их изменяли в форме):
        - name / Ваше имя
        - phone / Телефон
        - email / E-mail
        - ext_id / ID заявки
        - date_time / Дата создания заявки
        - form_name / Название формы
        - visitor_session_id / visitor_session_id
  - В "Дополнительные параметры" в поле "Content-Type" выберете application/json.

![image](FormDesigner.gif)

</details> 
<br />

- **Установите скрипты на формы FormDesigner**
прописать

<br />

- **Рекламная кампания/источник** — необходимо выбрать какую сущность использовать для обращений без сессии. По умолчанию выбрана Рекламная кампания (маркер не прожат), при прожатии маркера выбирается Источник. <br />
- В зависимости от положения переключателя "Рекламная кампания/источник" выводится либо список рекламных кампаний из личного кабинета клиента, либо список источников и сайтов. Необходимо указать какую **РК/источник и сайт** используем в случае отсутствия сессии. <br />

3. Нажмите сохранить. <br />

После подключения интеграции заявки будут попадать в  Сырые данные -> Обращения и цели.  <br />
Для проверки корректности работы интеграции оставьте тестовое обращение в квизе FormDesigner на сайте.
 

